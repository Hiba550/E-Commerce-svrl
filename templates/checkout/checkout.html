{% extends "base.html" %}

{% block title %}Checkout - Shree Vinayaga{% endblock %}

{% block content %}
<div class="container" style="margin: 3rem auto;">
    <h1 style="margin-bottom: 2rem;">Checkout</h1>
    
    <div class="row" style="gap: 2rem;">
        <!-- Shipping Form -->
        <div class="col-8">
            <div class="card" style="padding: 2rem;">
                <h2>Shipping Information</h2>
                
                <form method="POST" action="{{ url_for('checkout.checkout') }}">
                    {{ form.hidden_tag() }}
                    
                    <div class="form-group">
                        <label class="form-label">{{ form.full_name.label }}</label>
                        {{ form.full_name(class="form-control") }}
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">{{ form.phone.label }}</label>
                        {{ form.phone(class="form-control") }}
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">{{ form.address_line1.label }}</label>
                        {{ form.address_line1(class="form-control") }}
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">{{ form.address_line2.label }}</label>
                        {{ form.address_line2(class="form-control") }}
                    </div>
                    
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label class="form-label">{{ form.city.label }}</label>
                                {{ form.city(class="form-control") }}
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label class="form-label">{{ form.state.label }}</label>
                                {{ form.state(class="form-control") }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">{{ form.pincode.label }}</label>
                        {{ form.pincode(class="form-control") }}
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">{{ form.notes.label }}</label>
                        {{ form.notes(class="form-control", rows="3") }}
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg" style="width: 100%; margin-top: 1rem;">
                        <i class="fas fa-credit-card"></i> Place Order (Mock Payment)
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Order Summary -->
        <div class="col-4">
            <div class="card" style="padding: 2rem; position: sticky; top: 100px;">
                <h2>Order Summary</h2>
                
                <div style="margin-top: 1.5rem; max-height: 300px; overflow-y: auto;">
                    {% for item in cart_items %}
                    <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #DEE2E6;">
                        <div>
                            <p style="font-weight: 600; margin-bottom: 0.25rem;">{{ item.product.name }}</p>
                            <p style="font-size: 0.875rem; color: #6C757D;">Qty: {{ item.quantity }}</p>
                        </div>
                        <p>₹{{ item.get_subtotal() }}</p>
                    </div>
                    {% endfor %}
                </div>
                
                <div style="margin-top: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                        <span>Subtotal:</span>
                        <span>₹{{ subtotal }}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                        <span>Shipping:</span>
                        <span>₹{{ shipping_cost }}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #DEE2E6;">
                        <span>Tax (5%):</span>
                        <span>₹{{ tax_amount }}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; padding: 1rem 0; font-size: 1.25rem; font-weight: 700;">
                        <span>Total:</span>
                        <span class="price">₹{{ total_amount }}</span>
                    </div>
                </div>
                
                <div class="alert alert-info" style="margin-top: 1rem; font-size: 0.875rem;">
                    <i class="fas fa-info-circle"></i> This is a mock payment. Order will be confirmed instantly.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
